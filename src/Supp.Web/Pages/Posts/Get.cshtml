@page
@using Supp.Core.Tags
@model Supp.Web.Pages.Posts.GetModel
<div class="position-relative">
    <votes vote-url="@Url.Page("Get", "Vote", new { postId = Model.Post.Id })"
           undo-url="@Url.Page("Get", "UndoVote", new { postId = Model.Post.Id })"
           :init-votes="@Model.Votes"
           :init-voted="@Json.Serialize(Model.UserVoted)">
    </votes>

    <div>
        @Html.PostTypeToIcon(Model.Post.Type) | @Html.PostPriorityToIcon(Model.Post.Priority)
    </div>
    @*Tagi*@
    <div>
        <post-tag-editable update-url="@Url.Page("Get", "Edit")"
                           property-name="@nameof(Model.Post.Tags)"
                           :model-id="@Model.Post.Id"
                           :tags="@SerializationHelpers.TagsToJson(Model.Post.Tags.Select(t=>t.Tag))"
                           :all-tags="@SerializationHelpers.TagsToJson(Model.AllowedTags)">
        </post-tag-editable>
    </div>

    <h2>
        <editable update-url="@Url.Page("Get", "Edit")"
                  property-name="@nameof(Model.Post.Title)"
                  :model-id="@Model.Post.Id"
                  model-value="@Model.Post.Title">
        </editable>



        @*<edit-button update-url="@Url.Page("Get", "Edit")"
                         property-name="@nameof(Model.Post.Title)"
                         model-id="@Model.Post.Id"
                         model-value="@Model.Post.Title"
                         display-control-id="title-display"
                         edit-control-id="title-edit"></edit-button>
            <span id="title-display">@Model.Post.Title</span>
            <input type="text" value="@Model.Post.Title" id="title-edit" class="edit-control" />*@
    </h2>
<pre class="mt-2">
<editable update-url="@Url.Page("Get", "Edit")"
          property-name="@nameof(Model.Post.Body)"
          :model-id="@Model.Post.Id"
          model-value="@Model.Post.Body"
          template="textarea">
    </editable>
</pre>

    <h4>Komentarze</h4>
    <comments :post-id="@Model.Post.Id"
              add-url="@Url.Page("Get", "NewComment")"
              get-all-url="@Url.Page("Get", "AllComments", new { postId = Model.Post.Id })"
              pin-comment-url="@Url.Page("Get", "PinComment")"
              unpin-comment-url="@Url.Page("Get", "UnpinComment")"
              >
    </comments>
</div>